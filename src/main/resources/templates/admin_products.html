<!DOCTYPE html>
<html lang="th" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ - ‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" th:href="@{/css/admin-style.css}">
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <h5 class="text-center mb-3">‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á</h5>
  <div class="text-center mb-3">üë§ <span>Admin</span></div>
  <a href="/admin/dashboard">‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</a>
  <a href="/admin/products" class="active">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
  <a href="/admin/members">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
  <a href="/admin/orders">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</a>
  <a href="/admin/reports">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</a>
  <a href="/admin/settings">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</a>
  <a href="/logout">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
</div>

<!-- Content -->
<div class="content">
  <h4>üì¶ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h4>

  <!-- ‚úÖ ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
  <div class="card p-3 mb-4">
    <form th:action="@{${editing != null} ? '/admin/products/update' : '/admin/products/add'}"
          method="post"
          enctype="multipart/form-data"
          class="row g-2 align-items-end">
      
      <input type="hidden" name="product_id" th:if="${editing != null}" th:value="${editing.product_id}">

      <div class="col-md-2"><input type="text" name="brand" th:value="${editing?.brand}" placeholder="‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠" class="form-control" required></div>
      <div class="col-md-2"><input type="text" name="model" th:value="${editing?.model}" placeholder="‡∏£‡∏∏‡πà‡∏ô" class="form-control" required></div>
      <div class="col-md-2"><input type="text" name="size" th:value="${editing?.size}" placeholder="‡∏Ç‡∏ô‡∏≤‡∏î" class="form-control" required></div>
      <div class="col-md-2"><input type="number" step="0.01" name="price" th:value="${editing?.price}" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)" class="form-control" required></div>
      <div class="col-md-2"><input type="text" name="description" th:value="${editing?.description}" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î" class="form-control"></div>
      <div class="col-md-2"><input type="file" name="file" class="form-control"></div>
      <div class="col-md-12 text-end mt-2">
        <button type="submit" class="btn btn-success" th:text="${editing != null} ? '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç' : '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤'"></button>
        <a href="/admin/products" th:if="${editing != null}" class="btn btn-secondary">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</a>
      </div>
    </form>
  </div>

  <!-- ‚úÖ ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ -->
  <form action="/admin/products/search" method="get" class="search-bar mb-3">
    <div class="row g-2">
      <div class="col-md-3">
        <input type="text" name="brand" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠..." class="form-control" th:value="${brand}">
      </div>
      <div class="col-md-3">
        <input type="text" name="modelName" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏∏‡πà‡∏ô..." class="form-control" th:value="${modelName}">
      </div>
      <div class="col-md-2">
        <input type="text" name="size" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡∏ô‡∏≤‡∏î..." class="form-control" th:value="${size}">
      </div>
      <div class="col-md-2">
        <select name="status" class="form-select">
          <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
          <option value="available" th:selected="${status == 'available'}">available</option>
          <option value="sold" th:selected="${status == 'sold'}">sold</option>
        </select>
      </div>
      <div class="col-md-1">
        <button type="submit" class="btn btn-primary w-100">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
      </div>
      <div class="col-md-1">
        <a href="/admin/products" class="btn btn-secondary w-100">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</a>
      </div>
    </div>
  </form>

  <!-- ‚úÖ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
  <div class="card p-3">
    <table class="table table-bordered align-middle text-center">
      <thead class="table-light">
        <tr>
          <th>‡∏£‡∏´‡∏±‡∏™</th>
          <th>‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠</th>
          <th>‡∏£‡∏∏‡πà‡∏ô</th>
          <th>‡∏Ç‡∏ô‡∏≤‡∏î</th>
          <th>‡∏£‡∏≤‡∏Ñ‡∏≤</th>
          <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
          <th>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>
          <th>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="p : ${products}">
          <td th:text="${p.product_id}"></td>
          <td th:text="${p.brand}"></td>
          <td th:text="${p.model}"></td>
          <td th:text="${p.size}"></td>
          <td th:text="'‡∏ø' + ${p.price}"></td>
          <td th:text="${p.status}"></td>
          <td th:text="${p.description}"></td>
          <td>
            <a th:href="@{'/admin/products/edit/' + ${p.product_id}}" class="btn btn-sm btn-outline-primary">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</a>
            <a th:href="@{'/admin/products/delete/' + ${p.product_id}}" class="btn btn-sm btn-outline-danger"
               onclick="return confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ?')">‡∏•‡∏ö</a>
          </td>
        </tr>
        <tr th:if="${#lists.isEmpty(products)}">
          <td colspan="8" class="text-muted">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

</body>
</html>
